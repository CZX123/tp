@startuml
!include style.puml
skinparam arrowThickness 1.1
skinparam arrowColor MODEL_COLOR
skinparam classBackgroundColor MODEL_COLOR
skinparam responseMessageBelowArrow true

Package Model as ModelPackage <<Rectangle>>{
Class "<<interface>>\nReadOnlyAppData" as ReadOnlyAppData
Class "<<interface>>\nReadOnlyUserPrefs" as ReadOnlyUserPrefs
Class "<<interface>>\nModel" as Model
Class AppData
Class ModelManager
Class UserPrefs

Class UniqueContactList
Class UniqueEventList
Class Contact
Class Event
Class Email
Class Phone
Class Address
Class Name
Class Tag
Class Date
Class Participant

Class I #FFFFFF

}

'Main model classes
Class HiddenOutside #FFFFFF
HiddenOutside ..> Model
Model .right.> ReadOnlyUserPrefs
Model .left.> ReadOnlyAppData
ModelManager -left-> "1" AppData
ModelManager -right-> "1" UserPrefs
AppData .up.|> ReadOnlyAppData
ModelManager .up.|> Model
UserPrefs .up.|> ReadOnlyUserPrefs

'Contact and Event lists
AppData *--> "1 " UniqueContactList
UniqueContactList --> "~* all" Contact : ""
ModelManager -down[norank]-> "~* filtered   " Contact
AppData *--[norank]> "1" UniqueEventList
'Note: "all" role is switched to "filtered" because of uml formatting issues
UniqueEventList --> "     ~* filtered" Event
'Note: "filtered" role is switched to "all" because of uml formatting issues
ModelManager -down[norank]-> "~* all   " Event

'Contact and Event participant relationship
Participant -down-> "1" Contact
Participant "~*" <-down- Event
Participant <-down[hidden]- Event

'Contact and Event fields
Contact *--> "1" Email
Contact *--> "1" Phone
Contact *--> "1" Address
Contact *-[norank]-> "1" Name
Contact *--> "~*" Tag
Contact -right-> "~*" Event
Event *--> "1" Address
Event *--> "1" Date
Event *--> "~*" Tag
Event *-[norank]-> "1" Name

'Hidden relationships to improve diagram layout
ModelManager -down[hidden]- UniqueEventList
UniqueContactList -down[hidden]- Participant
UniqueEventList -down[hidden]- Participant
ModelManager -down[hidden]-> Participant
ModelManager -down[hidden]-> Participant
ModelManager -down[hidden]-> Contact
ModelManager -down[hidden]- Tag
UserPrefs -[hidden]-- I
Email -[hidden]right- Phone
Phone -[hidden]right- Name
@enduml
